<view class="xlb-page"><view class="table-list"><u-swipe-action vue-id="e8c22910-1" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{moveList}}" wx:for-item="movie" wx:for-index="__i0__" wx:key="_id"><u-swipe-action-item vue-id="{{('e8c22910-2-'+__i0__)+','+('e8c22910-1')}}" options="{{settingOptions}}" show="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['longpress',[['showMovieModel',['$0'],[[['moveList','_id',movie._id]]]]]]]}}" class="card" bindlongpress="__e"><view class="swipe-action u-border-top u-border-bottom"><view class="swipe-action__content"><view class="table-item card-body"><block wx:if="{{movie.pic}}"><image class="pic" src="{{movie.pic}}" data-event-opts="{{[['tap',[['viewMoviePic',['$0'],[[['moveList','_id',movie._id,'pic']]]]]]]}}" bindtap="__e"></image></block><block wx:else><image class="pic" src="https://mp-2f404463-4a21-4e83-abed-ede3b9b92e79.cdn.bspapp.com/img/load-img-404.png" data-event-opts="{{[['tap',[['viewMoviePic']]]]}}" bindtap="__e"></image></block><view class="movie-info"><text>{{movie._id}}</text><text>{{movie.movieName}}</text><text>{{"导演："+movie.director}}</text><text>{{"评分："+movie.rating}}</text></view></view></view></view></view></u-swipe-action-item></block></u-swipe-action></view><u-popup class="vue-ref" vue-id="e8c22910-3" show="{{showMovie}}" mode="center" data-ref="movieRef" data-event-opts="{{[['^close',[['movieClose']]],['^open',[['movieOpen']]]]}}" bind:close="__e" bind:open="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{movieCollectionsVisiblle}}"><view class="movie-box"><view class="movie-setting-box"><u-button vue-id="{{('e8c22910-4')+','+('e8c22910-3')}}" text="新增剧集" type="primary" icon="plus-square-fill" data-event-opts="{{[['^click',[['e0']]]]}}" bind:click="__e" bind:__l="__l"></u-button><view data-event-opts="{{[['tap',[['movieClose',['$event']]]]]}}" class="close" bindtap="__e"><u-icon vue-id="{{('e8c22910-5')+','+('e8c22910-3')}}" name="close-circle" color="#fff" size="35" bind:__l="__l"></u-icon></view></view><view class="movie-collection-list"><block wx:for="{{moveiCollectionList}}" wx:for-item="mc" wx:for-index="__i1__" wx:key="id"><view class="movie-collection-list__item"><view class="left"><view class="movie-name">{{mc.movieId}}</view><view class="file-name">{{mc.fileName}}</view><view class="collectioin">{{mc.collectionIndex}}</view></view></view></block></view></view></block><block wx:else><view class="movie-box add-box"><u--form class="vue-ref" vue-id="{{('e8c22910-6')+','+('e8c22910-3')}}" labelPosition="left" model="{{movieForm}}" labelWidth="80" data-ref="movieForm" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('e8c22910-7')+','+('e8c22910-6')}}" label="上传第几集" bind:__l="__l" vue-slots="{{['default']}}"><u--input bind:input="__e" vue-id="{{('e8c22910-8')+','+('e8c22910-7')}}" placeholder="输入集数(默认在最后一次添加的影视后)" border="none" inputAlign="right" suffixIcon="arrow-right" suffixIconStyle="{{({color:'#A2A4A6'})}}" value="{{movieForm.index}}" data-event-opts="{{[['^input',[['__set_model',['$0','index','$event',[]],['movieForm']]]]]}}" bind:__l="__l"></u--input></u-form-item><u-form-item vue-id="{{('e8c22910-9')+','+('e8c22910-6')}}" label="影视频" borderBottom="{{true}}" labelPosition="top" bind:__l="__l" vue-slots="{{['default']}}"><u-upload vue-id="{{('e8c22910-10')+','+('e8c22910-9')}}" maxCount="1" fileList="{{movieForm.fileList}}" accept="video" data-event-opts="{{[['^afterRead',[['afterReadVideo']]]]}}" bind:afterRead="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{!movieForm.thumb}}"><view class="uload-btn"><uni-icons vue-id="{{('e8c22910-11')+','+('e8c22910-10')}}" type="cloud-upload-filled" color="#909399" size="60" bind:__l="__l"></uni-icons></view></block></u-upload><block wx:if="{{movieForm.thumb}}"><view class="upload-videos"><view class="upload-video"><image src="{{movieForm.thumb}}"></image><view class="movie-info"></view><uni-icons class="deleteImg" vue-id="{{('e8c22910-12')+','+('e8c22910-9')}}" type="closeempty" color="#fff" size="15" bind:__l="__l"></uni-icons></view></view></block><block wx:if="{{uploadMovieViedeoLoadingNumber}}"><view class="progress"><u-line-progress vue-id="{{('e8c22910-13')+','+('e8c22910-9')}}" percentage="{{uploadMovieViedeoLoadingNumber}}" activeColor="#5ac725" height="20" bind:__l="__l"></u-line-progress></view></block></u-form-item></u--form><view class="submit-box"><u-button vue-id="{{('e8c22910-14')+','+('e8c22910-3')}}" type="primary" shape="circle" text="提交" data-event-opts="{{[['^click',[['submitForm']]]]}}" bind:click="__e" bind:__l="__l"></u-button><u-button vue-id="{{('e8c22910-15')+','+('e8c22910-3')}}" type="primary" shape="circle" plain="{{true}}" text="返回" data-event-opts="{{[['^click',[['e1']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view></block></u-popup></view>