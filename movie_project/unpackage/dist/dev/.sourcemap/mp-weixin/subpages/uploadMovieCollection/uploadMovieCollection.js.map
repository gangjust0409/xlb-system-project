{"version":3,"sources":["uni-app:///main.js","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?db41","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?11ef","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?1919","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?8433","uni-app:///subpages/uploadMovieCollection/uploadMovieCollection.vue","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?fab1","webpack:///E:/xlb-system-project/movie_project/subpages/uploadMovieCollection/uploadMovieCollection.vue?1063"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","moveList","settingOptions","text","queryParams","pageNum","pageSize","showMovie","movieForm","index","thumb","posterURL","movieCollectionsVisiblle","uploadMovieViedeoLoadingNumber","moveiCollectionList","methods","loadMovieList","movie","res","viewMoviePic","src","uni","urls","movieClose","movieOpen","showMovieModel","console","afterReadVideo","file","submitForm","movieCollectionObj","posterUrl","fileName","videoName","that","uniCloud","filePath","cloudPathAsRealPath","cloudPath","onUploadProgress","ret","icon","title","queryMovieCollection","movieId","id","collectionIndex","duration","onLoad"],"mappings":"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","file":"subpages/uploadMovieCollection/uploadMovieCollection.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './subpages/uploadMovieCollection/uploadMovieCollection.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./uploadMovieCollection.vue?vue&type=template&id=46917f4e&\"\nvar renderjs\nimport script from \"./uploadMovieCollection.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadMovieCollection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploadMovieCollection.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpages/uploadMovieCollection/uploadMovieCollection.vue\"\nexport default component.exports","export * from \"-!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadMovieCollection.vue?vue&type=template&id=46917f4e&\"","var components\ntry {\n  components = {\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    \"u-Form\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--form/u--form\" */ \"@/uni_modules/uview-ui/components/u--form/u--form.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    \"u-Input\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--input/u--input\" */ \"@/uni_modules/uview-ui/components/u--input/u--input.vue\"\n      )\n    },\n    uUpload: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-upload/u-upload\" */ \"@/uni_modules/uview-ui/components/u-upload/u-upload.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uLineProgress: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-line-progress/u-line-progress\" */ \"@/uni_modules/uview-ui/components/u-line-progress/u-line-progress.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.movieCollectionsVisiblle = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.movieCollectionsVisiblle = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadMovieCollection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadMovieCollection.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"xlb-page\">\r\n\t\t<view class=\"table-list\">\r\n\t\t\t<u-swipe-action>\r\n\t\t\t\t<u-swipe-action-item :options=\"settingOptions\" v-for=\"movie in moveList\" :key=\"movie._id\" show>\r\n\t\t\t\t\t<view class=\"card\" @longpress=\"showMovieModel(movie)\">\r\n\t\t\t\t\t\t<view class=\"swipe-action u-border-top u-border-bottom\">\r\n\t\t\t\t\t\t\t<view class=\"swipe-action__content\">\r\n\t\t\t\t\t\t\t\t<view class=\"table-item card-body\">\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"movie.pic\" :src=\"movie.pic\" class=\"pic\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"viewMoviePic(movie.pic)\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t<image v-else class=\"pic\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://mp-2f404463-4a21-4e83-abed-ede3b9b92e79.cdn.bspapp.com/img/load-img-404.png\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"viewMoviePic()\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"movie-info\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{movie._id}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>{{movie.movieName}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>导演：{{movie.director}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>评分：{{movie.rating}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-swipe-action-item>\r\n\t\t\t</u-swipe-action>\r\n\t\t</view>\r\n\t\t<u-popup :show=\"showMovie\" mode=\"center\" @close=\"movieClose\" @open=\"movieOpen\" ref=\"movieRef\">\r\n\t\t\t<!-- 列表 -->\r\n\t\t\t<view class=\"movie-box\" v-if=\"movieCollectionsVisiblle\">\r\n\t\t\t\t<view class=\"movie-setting-box\">\r\n\t\t\t\t\t<u-button text=\"新增剧集\" type=\"primary\" icon=\"plus-square-fill\"\r\n\t\t\t\t\t\t@click=\"movieCollectionsVisiblle = false\"></u-button>\r\n\t\t\t\t\t<view class=\"close\" @click=\"movieClose\">\r\n\t\t\t\t\t\t<u-icon name=\"close-circle\" color=\"#fff\" size=\"35\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"movie-collection-list\">\r\n\t\t\t\t\t<view class=\"movie-collection-list__item\" v-for=\"mc in moveiCollectionList\" :key=\"mc.id\">\r\n\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t<view class=\"movie-name\">{{mc.movieId}}</view>\r\n\t\t\t\t\t\t\t<view class=\"file-name\">{{mc.fileName}}</view>\r\n\t\t\t\t\t\t\t<view class=\"collectioin\">{{mc.collectionIndex}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 添加 -->\r\n\t\t\t<view class=\"movie-box add-box\" v-else>\r\n\t\t\t\t<u--form labelPosition=\"left\" :model=\"movieForm\" ref=\"movieForm\" labelWidth=\"80\">\r\n\t\t\t\t\t<u-form-item label=\"上传第几集\">\r\n\t\t\t\t\t\t<u--input v-model=\"movieForm.index\" placeholder=\"输入集数(默认在最后一次添加的影视后)\" border=\"none\"\r\n\t\t\t\t\t\t\tinputAlign=\"right\" suffixIcon=\"arrow-right\"\r\n\t\t\t\t\t\t\t:suffixIconStyle=\"{color: '#A2A4A6'}\"></u--input>\r\n\t\t\t\t\t</u-form-item>\r\n\t\t\t\t\t<u-form-item label=\"影视频\" borderBottom labelPosition=\"top\">\r\n\t\t\t\t\t\t<u-upload maxCount=\"1\" :fileList=\"movieForm.fileList\" accept=\"video\"\r\n\t\t\t\t\t\t\t@afterRead=\"afterReadVideo\">\r\n\t\t\t\t\t\t\t<view class=\"uload-btn\" v-if=\"!movieForm.thumb\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-upload-filled\" color=\"#909399\" size=\"60\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-upload>\r\n\t\t\t\t\t\t<view class=\"upload-videos\" v-if=\"movieForm.thumb\">\r\n\t\t\t\t\t\t\t<view class=\"upload-video\">\r\n\t\t\t\t\t\t\t\t<image :src=\"movieForm.thumb\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"movie-info\"></view>\r\n\r\n\t\t\t\t\t\t\t\t<uni-icons class=\"deleteImg\" type=\"closeempty\" color=\"#fff\" size=\"15\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"progress\" v-if=\"uploadMovieViedeoLoadingNumber\">\r\n\t\t\t\t\t\t\t<u-line-progress :percentage=\"uploadMovieViedeoLoadingNumber\" activeColor=\"#5ac725\"\r\n\t\t\t\t\t\t\t\theight=\"20\"></u-line-progress>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-form-item>\r\n\t\t\t\t</u--form>\r\n\t\t\t\t<view class=\"submit-box\">\r\n\t\t\t\t\t<u-button type=\"primary\" shape=\"circle\" text=\"提交\" @click=\"submitForm\"></u-button>\r\n\t\t\t\t\t<u-button type=\"primary\" shape=\"circle\" plain text=\"返回\"\r\n\t\t\t\t\t\t@click=\"movieCollectionsVisiblle = true\"></u-button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmoveList: null,\r\n\t\t\t\tsettingOptions: [{\r\n\t\t\t\t\t\ttext: \"添加剧集\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"删除\"\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tqueryParams: {\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t},\r\n\t\t\t\tshowMovie: false,\r\n\t\t\t\tmovieForm: {\r\n\t\t\t\t\tindex: null,\r\n\t\t\t\t\tthumb: null,\r\n\t\t\t\t\tposterURL: null,\r\n\t\t\t\t},\r\n\t\t\t\t//是否添加\r\n\t\t\t\tmovieCollectionsVisiblle: true,\r\n\t\t\t\t//加载loading\r\n\t\t\t\tuploadMovieViedeoLoadingNumber: null,\r\n\t\t\t\t//剧集列表\r\n\t\t\t\tmoveiCollectionList: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//加载所有的影视信息\r\n\t\t\tasync loadMovieList() {\r\n\t\t\t\tconst movie = uniCloud.importObject(\"movie\");\r\n\t\t\t\tconst res = await movie.queryList({\r\n\t\t\t\t\tpageNum: (this.queryParams.pageNum - 1) * this.queryParams.pageSize,\r\n\t\t\t\t\tpageSize: this.queryParams.pageSize\r\n\t\t\t\t});\r\n\t\t\t\tif (res.affectedDocs > 0) {\r\n\t\t\t\t\tthis.moveList = res.data;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//查看当前影视封面\r\n\t\t\tviewMoviePic(picSrc) {\r\n\t\t\t\tlet src = \"\";\r\n\t\t\t\tif (picSrc) {\r\n\t\t\t\t\tsrc = picSrc;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsrc = \"https://mp-2f404463-4a21-4e83-abed-ede3b9b92e79.cdn.bspapp.com/img/load-img-404.png\";\r\n\t\t\t\t}\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [src]\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tmovieClose() {\r\n\t\t\t\tthis.showMovie = false;\r\n\t\t\t},\r\n\t\t\tmovieOpen() {\r\n\t\t\t\tthis.showMovie = true;\r\n\t\t\t},\r\n\t\t\tshowMovieModel(movie) {\r\n\t\t\t\tthis.movieForm.movieId = movie._id;\r\n\t\t\t\tconsole.log(movie, this.movieForm.movieId);\r\n\t\t\t\tthis.movieForm.movieName = movie.movieName;\r\n\t\t\t\tthis.queryMovieCollection(movie._id);\r\n\t\t\t\tthis.movieOpen();\r\n\t\t\t},\r\n\t\t\t//提交文件后\r\n\t\t\tasync afterReadVideo({\r\n\t\t\t\tfile\r\n\t\t\t}) {\r\n\t\t\t\tthis.movieForm.thumb = file.thumb;\r\n\t\t\t\tthis.movieForm.duration = file.duration;\r\n\t\t\t\tthis.movieForm.posterURL = file;\r\n\r\n\t\t\t},\r\n\t\t\tasync submitForm() {\r\n\t\t\t\tconst movieCollectionObj = uniCloud.importObject(\"movieCollection\");\r\n\t\t\t\tif (!this.movieForm.index) {\r\n\t\t\t\t\t// this.movieForm.index = \r\n\t\t\t\t}\r\n\t\t\t\tconst posterUrl = this.movieForm.posterURL;\r\n\t\t\t\t//将中文转为英文\r\n\t\t\t\tconst fileName = new Date().getTime();\r\n\t\t\t\tconst videoName = this.movieForm.index + \"_\" + \"MV\" + fileName + posterUrl.url.substring(\r\n\t\t\t\t\tposterUrl.url.lastIndexOf(\".\"));\r\n\t\t\t\tif (posterUrl) {\r\n\t\t\t\t\t//压缩文件\r\n\t\t\t\t\t/* uni.getVideoInfo({\r\n\t\t\t\t\t\tsrc: posterUrl.url,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tuni.compressVideo({\r\n\t\t\t\t\t\t\t\tsrc: posterUrl.url,\r\n\t\t\t\t\t\t\t\tbitrate: res.bitrate,\r\n\t\t\t\t\t\t\t\tfps: res.fps,\r\n\t\t\t\t\t\t\t\tresolution: 0.6,\r\n\t\t\t\t\t\t\t\tsuccess(ret) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(ret);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\t\tPromise.reject(\"压缩：\" + JSON.stringify(err))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tPromise.reject(\"获取视频信息：\" + JSON.stringify(err))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}) */\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet that = this;\r\n\t\t\t\t\t\t//上传视频\r\n\t\t\t\t\t\tconst ret = await uniCloud.uploadFile({\r\n\t\t\t\t\t\t\tfilePath: posterUrl.url,\r\n\t\t\t\t\t\t\tcloudPathAsRealPath: true,\r\n\t\t\t\t\t\t\tcloudPath: `/video/${videoName}`,\r\n\t\t\t\t\t\t\tonUploadProgress(res) {\r\n\t\t\t\t\t\t\t\tthat.uploadMovieViedeoLoadingNumber = Math.floor((res.loaded / res.total) *\r\n\t\t\t\t\t\t\t\t\t100);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(ret);\r\n\t\t\t\t\t\tif (ret.success) {\r\n\t\t\t\t\t\t\tthis.movieForm.posterURL = ret.fileID;\r\n\t\t\t\t\t\t\tthis.uploadMovieViedeoLoadingNumber = null;\r\n\t\t\t\t\t\t\tconst res = await movieCollectionObj.addMovieCollection(this.movieForm);\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif (res.id) {\r\n\t\t\t\t\t\t\t\tthis.movieCollectionsVisiblle = true;\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: \"success\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"添加成功！\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: \"exception\",\r\n\t\t\t\t\t\t\ttitle: \"异常：\" + err\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//查询当前影视剧集\r\n\t\t\tasync queryMovieCollection(movieId) {\r\n\t\t\t\tconst movieCollectionObj = uniCloud.importObject(\"movieCollection\");\r\n\t\t\t\tconst res = await movieCollectionObj.queryMovieCollection({movieId});\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (res.affectedDocs >= 1) {\r\n\t\t\t\t\tthis.moveiCollectionList = res.data.map(mc => {\r\n\t\t\t\t\t\tconst fileName = mc.posterURL.substring(mc.posterURL.lastIndexOf(\"/\") + 1);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid: mc._id,\r\n\t\t\t\t\t\t\tfileName,\r\n\t\t\t\t\t\t\tcollectionIndex: mc.index,\r\n\t\t\t\t\t\t\tduration: mc.duration,\r\n\t\t\t\t\t\t\tmovieId: mc.movieId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(this.moveiCollectionList);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.loadMovieList();\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.table-list {\r\n\t\t.card {\r\n\t\t\t.table-item {\r\n\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t.pic {\r\n\t\t\t\t\twidth: 225rpx;\r\n\t\t\t\t\theight: 250rpx;\r\n\t\t\t\t\tmargin-right: 15rpx\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.movie-info {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tline-height: 2;\r\n\t\t\t\t\t@include flex(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.movie-box {\r\n\t\twidth: 680rpx;\r\n\t\theight: 820rpx;\r\n\t\tposition: relative;\r\n\r\n\t\t.movie-setting-box {\r\n\t\t\twidth: 200rpx;\r\n\t\t\tpadding: 30rpx 20rpx;\r\n\r\n\t\t\t.close {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: -10%;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.movie-collection-list {\r\n\t\t\tmargin: 20rpx 0;\r\n\r\n\t\t\t&__item {}\r\n\t\t}\r\n\r\n\t\t&.add-box {\r\n\t\t\tpadding: 15rpx 25rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.upload-videos {\r\n\t\t.upload-video {\r\n\t\t\t&>image {\r\n\t\t\t\twidth: 170rpx;\r\n\t\t\t\theight: 190rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmargin: 15rpx 0 0 15rpx;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.progress {\r\n\t\tpadding: 15rpx 20rpx;\r\n\t}\r\n\r\n\t.submit-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 10px;\r\n\t\tposition: sticky;\r\n\t\tbottom: 10px;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\r\n\t\tbutton {\r\n\t\t\t&:last-of-type {\r\n\t\t\t\tmargin-left: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadMovieCollection.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\rjs\\\\devlopments\\\\HBuilderX.3.8.12.20230802-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadMovieCollection.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1695535292298\n      var cssReload = require(\"D:/rjs/devlopments/HBuilderX.3.8.12.20230802-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}